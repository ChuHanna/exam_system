<% provide :title, t(".title") %>
<h1 class="h3 mb-2 text-gray-800"><%= t".title" %></h1>
<div class="card shadow mb-4">
  <div class="card-header py-3">
    <%= render "topics/search" %>
  </div>
  <div class="card-body">
  <%if can? :manage, Topic %>
    <%= link_to(new_topic_path, class: "nav-link") do %>
      <i class="fas fa-plus-circle"></i>
      <%= t ".create" %>
    <% end %>
  <%end%>
    <div class="table-responsive">
      <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
        <thead>
          <tr>
            <th><%= t ".no_" %></th>
            <th><%= t ".name" %></th>
            <th><%= t ".des" %></th>
            <th><%= t ".duration" %></th>
            <th><%= t ".user_name" %></th>
            <th><%= t ".subject_name" %></th>
            <th><%= t ".updated_or_deleted" %></th>
            <th><%= t ".action" %></th>
          </tr>
        </thead>
        <tbody>
          <% @topics.each_with_index do |topic, index| %>
            <% if can? :read, Topic %>
              <tr>
                <td><%= index + 1 %></td>
                <td><%= truncate(topic.name, length: Settings.topic.name.length) %></td>
                <td><%= truncate(topic.description, length: Settings.topic.description) %></td>
                <td><%= topic.duration %></td>
                <td><%= truncate(topic.user.name, length: Settings.topic.subject.length) %></td>
                <td><%= truncate(topic.subject.name, length: Settings.topic.subject.length) %></td>
                <td><%= topic.deleted_at? ? topic.deleted_at : topic.updated_at %></td>
                <td center>
                  <%= link_to( "#", class: "btn-info btn-circle btn-sm") do %>
                    <i class="fas fa-eye"></i>
                  <% end %>

                  <% if can? :manage, topic %>
                    <%= link_to(edit_topic_path(topic), class: "btn-primary btn-circle btn-sm") do %>
                      <i class="fas fa-edit"></i>
                    <% end %>
                  <%end%>
                </td>
              </tr>
            <% end %>
          <% end %>
        </tbody>
      </table>
      <%== pagy_bootstrap_nav(@pagy) %>
    </div>
  </div>
</div>
